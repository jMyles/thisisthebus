<!doctype html>

<html lang="en">
<head>
    <script src="/apps/jquery-3.1.1.min.js"></script>

    <meta charset="utf-8">

    <title>this is the bus.</title>

    <meta name="description" content="this is the bus">
    <meta name="author" content="Chelsea Kaye and Justin Myles">

    <link rel="stylesheet" href="/apps/internal/css/styles.css?v=1.0">
    <link href="/apps/internal/css/fonts.css" rel="stylesheet">

    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
    <![endif]-->
    
</head>


<body>
    
    
        <div id="bannerSlice" class="banner">
    <h2 id="pageName" class="atopBanner">Our Tech Stack</h2>
    <a href="/"><h3 class="brandLabel">this is the bus</h3></a>
    <img id="banner-image" src="/apps/internal/img/banner-slice.JPG"/>
    
</div>
    


    
    
    

    <div id="main" class="page underSlice">
        <div id="between">
        
            <div class="author">by jMyles</div>
        
        
            <div class="lastUpdate">last updated: July 9, 2017, 8:56 p.m.</div>
        

        </div>
        <div class="blackMainInfo">
            <div class="text left">
                <p>Our bus is our home, but it's also a teaching and engineering platform.
We have lots of wires and microcontrollers and antennae hanging everywhere; we don't use conduit or construction to hide the reality that we live in a hack job.  :-)
<blockquote class="instagram-media" data-instgrm-version="7" style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);"><div style="padding:8px;"> <div style=" background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;"> <div style=" background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;"></div></div><p style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;"><a href="https://www.instagram.com/p/BOLzw9-AiKX/" style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;" target="_blank">A post shared by A slashRoute project (@thisisthebus)</a> on <time style=" font-family:Arial,sans-serif; font-size:14px; line-height:17px;" datetime="2016-12-19T03:59:44+00:00">Dec 18, 2016 at 7:59pm PST</time></p></div></blockquote> <script async defer src="//platform.instagram.com/en_US/embeds.js"></script></p>
<h3>At a glance</h3>
<table>
<thead>
<tr>
<th>Project</th>
<th>We use it for....</th>
</tr>
</thead>
<tbody>
<tr>
<td>Raspberry Pi</td>
<td>Power monitoring, Internet gateway, Automation Server</td>
</tr>
<tr>
<td>4x Deep Cycle Batteries</td>
<td>Energy storage (5.98 kwh; about 10 days autonomy)</td>
</tr>
<tr>
<td>DC-DC Converters</td>
<td>Supplying power to all devices</td>
</tr>
<tr>
<td>InfluxDB</td>
<td>Time-series Database</td>
</tr>
<tr>
<td>Grafana</td>
<td>Visualizing energy data</td>
</tr>
<tr>
<td>Neopixel RGBW LEDs</td>
<td>Illumination</td>
</tr>
<tr>
<td>WiPy</td>
<td>Analog sensing, lighting control</td>
</tr>
<tr>
<td>Micropython</td>
<td>LED controller, sensor logic</td>
</tr>
<tr>
<td>Home Assistant</td>
<td>Automation Interface</td>
</tr>
<tr>
<td><a href="https://github.com/thisisthebus/brilliant.py">Brilliant.py</a></td>
<td>Lighting effects</td>
</tr>
<tr>
<td>stray_electrons</td>
<td>Power shunt reading logic</td>
</tr>
<tr>
<td>composting toilet</td>
<td>Pooping</td>
</tr>
</tbody>
</table>
<h2>The Bus Chassis</h2>
<p>By mass, the vast majority of the bus is reused and repurposed: nearly 12,000 pounds of steel, aluminum and sheet metal, which once carried students to and from a school in Pennsylvania, now constitute our home and engineering / teaching platform.
The Bus began as an International 3800 school bus with Thomas coachwork.  It has a Navistar T444E Diesel engine. It is 38' long and has a 6' ceiling down the center.</p>
<h2>Python</h2>
<p>The Python tribe is a crucial cornerstone of our social support network.
We generally attend either PyCon.us or DjangoCon.us (or both) each year.
Our Python friends and their languages drive the bus project forward just as much as the engine.  We've been blessed to find Python folk across the country who have offered us parking, power, and water.
We use a number of Python projects on our Raspberry Pi, as well as Micropython on our smaller microcontrollers.</p>
<h2>Raspberry Pi</h2>
<p>It's hard to imagine the bus without Raspberry Pi.
We have ours mounted on our "wonky jar shelf."
<img alt="Raspberry Pi on wonky shelf" src="/apps/pages/img/rpi-wonky-shelf.jpeg" /></p>
<h4>The Pi is responsible for the following:</h4>
<h5>Power consumption monitoring</h5>
<p>We read from three different power shunts about six times per second:</p>
<ul>
<li>Our consumption (power going from the batteries to our devices)</li>
<li>Solar power (from the charge controller to the batteries)</li>
<li>"Petrochemical power" (from the alternator or plug-in charger to the batteries)</li>
</ul>
<p>We also read the system voltage and solar array voltage at a similar interval.
Then, every 2 seconds, we average the values together and store the 2-second average in Influx DB.
From there, it's fairly easy to feed that data into Grafana so that we always have nice-looking real-time charts depicting our energy situation:
<img alt="Grafana Energy Chart" src="/apps/pages/img/energy-chart1.png" /></p>
<h5>Internet Connection Gateway</h5>
<p>We operate a LAN within the bus for many everyday tasks.  But of course, we still need to connect to the corporate internet every day.
To accomplish this, we use a USB wifi device and a big honking TP-LINK antenna.
<img alt="Wifi Antenna" src="/apps/iotd/img/2017-04-01__that-theres-a-wifi-antenna__9290b2d3.JPG" />
The Raspberry Pi acts as our gateway, providing service to the LAN.</p>
<h5>Automation Interface</h5>
<p>We use the Raspberry Pi Foundation 7" touchscreen along with <a href="https://home-assistant.io/">Home Assistant</a>, an amazing project maintained by Python friends, to automate many aspects of our life on the bus, including our lighting.</p>
<h2>Neopixels!</h2>
<p>We use NeoPixel RGBW strips for much of our lighting.
These LED strips have four diodes on each chip (and about 60 chips per meter).
One of the diodes provides a wide-spectrum, natural-feeling white color.  The other three are for adding red, green, and blue as needed.
<blockquote class="instagram-media" data-instgrm-version="7" style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);"><div style="padding:8px;"> <div style=" background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;"> <div style=" background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;"></div></div><p style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;"><a href="https://www.instagram.com/p/BSTrpxsjdZu/" style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;" target="_blank">A post shared by A slashRoute project (@thisisthebus)</a> on <time style=" font-family:Arial,sans-serif; font-size:14px; line-height:17px;" datetime="2017-03-31T15:28:21+00:00">Mar 31, 2017 at 8:28am PDT</time></p></div></blockquote> <script async defer src="//platform.instagram.com/en_US/embeds.js"></script></p>
<h2>Power</h2>
<p>We have six flexible Solar Cynergy panels on the roof of our bus.
<blockquote class="instagram-media" data-instgrm-version="7" style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);"><div style="padding:8px;"> <div style=" background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;"> <div style=" background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;"></div></div><p style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;"><a href="https://www.instagram.com/p/BOKxSY-g_5i/" style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;" target="_blank">A post shared by A slashRoute project (@thisisthebus)</a> on <time style=" font-family:Arial,sans-serif; font-size:14px; line-height:17px;" datetime="2016-12-18T18:18:51+00:00">Dec 18, 2016 at 10:18am PST</time></p></div></blockquote> <script async defer src="//platform.instagram.com/en_US/embeds.js"></script>
One thing that distinguishes our build from most that we see is that we don't use an inverter for everyday household operations. We only turn our inverter on to use AC motors (coffee grinder, blender, juicer).  Other than that, we convert DC voltage locally to the voltage our devices need.  Our house batteries are 12v, run in parallel, so we are able to use most 12v devices without a converter or regulator.</p>
<p>Here are some DC devices we use and their voltages:</p>
<table>
<thead>
<tr>
<th>Device</th>
<th>Voltage</th>
</tr>
</thead>
<tbody>
<tr>
<td>Dometic 94L Refridgerator</td>
<td>12v</td>
</tr>
<tr>
<td>USB Charging Stations</td>
<td>12v</td>
</tr>
<tr>
<td>Wi-Fi Acess Points</td>
<td>12v</td>
</tr>
<tr>
<td>Composting Toilet</td>
<td>12v</td>
</tr>
<tr>
<td>Computer</td>
<td>19.5v</td>
</tr>
<tr>
<td>Rasbperry Pi</td>
<td>5v</td>
</tr>
<tr>
<td>Neopixel strips</td>
<td>5v</td>
</tr>
</tbody>
</table>
<p>In terms of energy efficiency, this kind of direct connection is great.  While inverters have become more efficient over the years, the consumer-grade AC adapters that power many household devices are not made with off-grid life in mind.</p>
<p>We have measured the comparative power consumption of a few devices by plugging them in through their AC adapters into the inverter and then through a DC-DC converter.  In every case, we have measured at least a 20% gain in efficiency.  Some devices are closer to 30%.
Here's a photo of our DC and AC distribution systems (notice the DC system is on a hinge for easy hacking):
<blockquote class="instagram-media" data-instgrm-version="7" style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);"><div style="padding:8px;"> <div style=" background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;"> <div style=" background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;"></div></div><p style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;"><a href="https://www.instagram.com/p/BSWhDGdDFLA/" style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;" target="_blank">A post shared by A slashRoute project (@thisisthebus)</a> on <time style=" font-family:Arial,sans-serif; font-size:14px; line-height:17px;" datetime="2017-04-01T17:53:25+00:00">Apr 1, 2017 at 10:53am PDT</time></p></div></blockquote> <script async defer src="//platform.instagram.com/en_US/embeds.js"></script></p>
<p>OK friends, that's all for now.  Peace and Persistence!</p>
            </div>
         </div>
    </div>
    


    
    <div id="footer">
        <a href="https://www.netlify.com">
          <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg"/>
        </a>
        
    </div>
    

</body>
